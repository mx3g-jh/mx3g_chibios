<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>ChibiOS/HAL: Managed Flash Storage Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="custom.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ChibiOS/HAL
   &#160;<span id="projectnumber">8.2.0</span>
<script type="text/javascript"><!--
google_ad_client = "pub-3840594581853944";
/* Documentation, bottom, 728x90, created 9/19/10 */
google_ad_slot = "1902290615";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___h_a_l___m_f_s.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle">
<div class="title">Managed Flash Storage Driver<div class="ingroups"><a class="el" href="group___i_o.html">HAL</a> &raquo; <a class="el" href="group___h_a_l___c_o_m_p_l_e_x___d_r_i_v_e_r_s.html">Complex Drivers</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Managed Flash Storage Driver.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Managed Flash Storage Driver:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group___h_a_l___m_f_s.png" border="0" alt="" usemap="#group______h__a__l______m__f__s"/>
<map name="group______h__a__l______m__f__s" id="group______h__a__l______m__f__s">
</map>
</td></tr></table></center>
</div>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Managed Flash Storage Driver. </p>
<p>This module implements a managed flash storage able to store a finite number of variable-size records. Records are retrieved by their index number.<br />
 The driver is automatically performs:</p><ul>
<li>Wear leveling.</li>
<li>Auto repair after power loss.</li>
<li>Garbage collection in order to remove erased data.</li>
</ul>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gaf2d011ef87af5edc506246352c08a312"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gaf2d011ef87af5edc506246352c08a312">ALIGNED_REC_SIZE</a>(n)&#160;&#160;&#160;(<a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a>)MFS_ALIGN_NEXT(sizeof (<a class="el" href="unionmfs__data__header__t.html">mfs_data_header_t</a>) + (size_t)(n))</td></tr>
<tr class="memdesc:gaf2d011ef87af5edc506246352c08a312"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data record size aligned.  <a href="#gaf2d011ef87af5edc506246352c08a312">More...</a><br /></td></tr>
<tr class="separator:gaf2d011ef87af5edc506246352c08a312"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacead5218e33587ddf7063f34cf5cd61d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gacead5218e33587ddf7063f34cf5cd61d">ALIGNED_DHDR_SIZE</a>&#160;&#160;&#160;<a class="el" href="group___h_a_l___m_f_s.html#gaf2d011ef87af5edc506246352c08a312">ALIGNED_REC_SIZE</a>(0)</td></tr>
<tr class="memdesc:gacead5218e33587ddf7063f34cf5cd61d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data record header size aligned.  <a href="#gacead5218e33587ddf7063f34cf5cd61d">More...</a><br /></td></tr>
<tr class="separator:gacead5218e33587ddf7063f34cf5cd61d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7726369e293612a01ed8fd3042e0a227"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga7726369e293612a01ed8fd3042e0a227">ALIGNED_SIZEOF</a>(t)&#160;&#160;&#160;(((sizeof (t) - 1U) | MFS_ALIGN_MASK) + 1U)</td></tr>
<tr class="memdesc:ga7726369e293612a01ed8fd3042e0a227"><td class="mdescLeft">&#160;</td><td class="mdescRight">Aligned size of a type.  <a href="#ga7726369e293612a01ed8fd3042e0a227">More...</a><br /></td></tr>
<tr class="separator:ga7726369e293612a01ed8fd3042e0a227"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaea7b80660167c3b72a48d752ed34faae"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gaea7b80660167c3b72a48d752ed34faae">PAIR</a>(a,  b)&#160;&#160;&#160;(((unsigned)(a) &lt;&lt; 2U) | (unsigned)(b))</td></tr>
<tr class="memdesc:gaea7b80660167c3b72a48d752ed34faae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Combines two values (0..3) in one (0..15).  <a href="#gaea7b80660167c3b72a48d752ed34faae">More...</a><br /></td></tr>
<tr class="separator:gaea7b80660167c3b72a48d752ed34faae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0277a2d4d7591173f0275af429e33a13"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga0277a2d4d7591173f0275af429e33a13">RET_ON_ERROR</a>(err)</td></tr>
<tr class="memdesc:ga0277a2d4d7591173f0275af429e33a13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error check helper.  <a href="#ga0277a2d4d7591173f0275af429e33a13">More...</a><br /></td></tr>
<tr class="separator:ga0277a2d4d7591173f0275af429e33a13"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Configuration options</h2></td></tr>
<tr class="memitem:ga0dd05a7bc7d3f69ee9e95c0fe3f26b38"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga0dd05a7bc7d3f69ee9e95c0fe3f26b38">MFS_CFG_MAX_RECORDS</a>&#160;&#160;&#160;32</td></tr>
<tr class="memdesc:ga0dd05a7bc7d3f69ee9e95c0fe3f26b38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of indexed records in the managed storage.  <a href="#ga0dd05a7bc7d3f69ee9e95c0fe3f26b38">More...</a><br /></td></tr>
<tr class="separator:ga0dd05a7bc7d3f69ee9e95c0fe3f26b38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7370ae665f30570c642799ce51f7730d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga7370ae665f30570c642799ce51f7730d">MFS_CFG_MAX_REPAIR_ATTEMPTS</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:ga7370ae665f30570c642799ce51f7730d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of repair attempts on partition mount.  <a href="#ga7370ae665f30570c642799ce51f7730d">More...</a><br /></td></tr>
<tr class="separator:ga7370ae665f30570c642799ce51f7730d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9387a02dbeca5b8288fd72afaa285ebe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga9387a02dbeca5b8288fd72afaa285ebe">MFS_CFG_WRITE_VERIFY</a>&#160;&#160;&#160;TRUE</td></tr>
<tr class="memdesc:ga9387a02dbeca5b8288fd72afaa285ebe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify written data.  <a href="#ga9387a02dbeca5b8288fd72afaa285ebe">More...</a><br /></td></tr>
<tr class="separator:ga9387a02dbeca5b8288fd72afaa285ebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5b6511e1ff36948a405373a579ea95fe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga5b6511e1ff36948a405373a579ea95fe">MFS_CFG_STRONG_CHECKING</a>&#160;&#160;&#160;TRUE</td></tr>
<tr class="memdesc:ga5b6511e1ff36948a405373a579ea95fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables a stronger and slower check procedure on mount.  <a href="#ga5b6511e1ff36948a405373a579ea95fe">More...</a><br /></td></tr>
<tr class="separator:ga5b6511e1ff36948a405373a579ea95fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1b852c8a1778e81373b7e8a4626c5472"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga1b852c8a1778e81373b7e8a4626c5472">MFS_CFG_BUFFER_SIZE</a>&#160;&#160;&#160;32</td></tr>
<tr class="memdesc:ga1b852c8a1778e81373b7e8a4626c5472"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of the buffer used for data copying.  <a href="#ga1b852c8a1778e81373b7e8a4626c5472">More...</a><br /></td></tr>
<tr class="separator:ga1b852c8a1778e81373b7e8a4626c5472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab6e932beb3b9c5eaa4fb8fee27471c18"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gab6e932beb3b9c5eaa4fb8fee27471c18">MFS_CFG_MEMORY_ALIGNMENT</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:gab6e932beb3b9c5eaa4fb8fee27471c18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enforced memory alignment.  <a href="#gab6e932beb3b9c5eaa4fb8fee27471c18">More...</a><br /></td></tr>
<tr class="separator:gab6e932beb3b9c5eaa4fb8fee27471c18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga70babcd0ee6e94494f9a4d3fd6a4f9b2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga70babcd0ee6e94494f9a4d3fd6a4f9b2">MFS_CFG_TRANSACTION_MAX</a>&#160;&#160;&#160;16</td></tr>
<tr class="memdesc:ga70babcd0ee6e94494f9a4d3fd6a4f9b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of objects writable in a single transaction.  <a href="#ga70babcd0ee6e94494f9a4d3fd6a4f9b2">More...</a><br /></td></tr>
<tr class="separator:ga70babcd0ee6e94494f9a4d3fd6a4f9b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Error codes handling macros</h2></td></tr>
<tr class="memitem:gae3dd499fd3b3c1528f48cdd8cdf39df0"><td class="memItemLeft" align="right" valign="top"><a id="gae3dd499fd3b3c1528f48cdd8cdf39df0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MFS_IS_ERROR</b>(err)&#160;&#160;&#160;((err) &lt; MFS_NO_ERROR)</td></tr>
<tr class="separator:gae3dd499fd3b3c1528f48cdd8cdf39df0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5a9e15815ed824b46d0158e0f4c3249e"><td class="memItemLeft" align="right" valign="top"><a id="ga5a9e15815ed824b46d0158e0f4c3249e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MFS_IS_WARNING</b>(err)&#160;&#160;&#160;((err) &gt; MFS_NO_ERROR)</td></tr>
<tr class="separator:ga5a9e15815ed824b46d0158e0f4c3249e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Alignment macros</h2></td></tr>
<tr class="memitem:ga6df8e071486418088c63fd5e36509c41"><td class="memItemLeft" align="right" valign="top"><a id="ga6df8e071486418088c63fd5e36509c41"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MFS_ALIGN_MASK</b>&#160;&#160;&#160;((uint32_t)<a class="el" href="group___h_a_l___m_f_s.html#gab6e932beb3b9c5eaa4fb8fee27471c18">MFS_CFG_MEMORY_ALIGNMENT</a> - 1U)</td></tr>
<tr class="separator:ga6df8e071486418088c63fd5e36509c41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9302b19ef1f933b10b2ec3f6360adee2"><td class="memItemLeft" align="right" valign="top"><a id="ga9302b19ef1f933b10b2ec3f6360adee2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MFS_IS_ALIGNED</b>(v)&#160;&#160;&#160;(((uint32_t)(v) &amp; MFS_ALIGN_MASK) == 0U)</td></tr>
<tr class="separator:ga9302b19ef1f933b10b2ec3f6360adee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8bbd0c7c3bcef70ce282af7118c8eaa3"><td class="memItemLeft" align="right" valign="top"><a id="ga8bbd0c7c3bcef70ce282af7118c8eaa3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MFS_ALIGN_PREV</b>(v)&#160;&#160;&#160;((uint32_t)(v) &amp; ~MFS_ALIGN_MASK)</td></tr>
<tr class="separator:ga8bbd0c7c3bcef70ce282af7118c8eaa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaca889d06a56973d62813816693df818b"><td class="memItemLeft" align="right" valign="top"><a id="gaca889d06a56973d62813816693df818b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MFS_ALIGN_NEXT</b>(v)</td></tr>
<tr class="separator:gaca889d06a56973d62813816693df818b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gab1553dd70ef82b0c4a4ba607c660563a"><td class="memItemLeft" align="right" valign="top">typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gab1553dd70ef82b0c4a4ba607c660563a">mfs_id_t</a></td></tr>
<tr class="memdesc:gab1553dd70ef82b0c4a4ba607c660563a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of a record identifier.  <a href="#gab1553dd70ef82b0c4a4ba607c660563a">More...</a><br /></td></tr>
<tr class="separator:gab1553dd70ef82b0c4a4ba607c660563a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionmfs__bank__header__t.html">mfs_bank_header_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of a bank header.  <a href="unionmfs__bank__header__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionmfs__data__header__t.html">mfs_data_header_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of a data block header.  <a href="unionmfs__data__header__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_f_s_config.html">MFSConfig</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of a MFS configuration structure.  <a href="struct_m_f_s_config.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmfs__transaction__op__t.html">mfs_transaction_op_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of a buffered write/erase operation within a transaction.  <a href="structmfs__transaction__op__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of an MFS instance.  <a href="struct_m_f_s_driver.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gabfee0e57611e55ed09ad89610b9ffdfd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gabfee0e57611e55ed09ad89610b9ffdfd">mfs_flash_read</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a> offset, size_t n, uint8_t *rp)</td></tr>
<tr class="memdesc:gabfee0e57611e55ed09ad89610b9ffdfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash read.  <a href="#gabfee0e57611e55ed09ad89610b9ffdfd">More...</a><br /></td></tr>
<tr class="separator:gabfee0e57611e55ed09ad89610b9ffdfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ff7f938edf6fc7d7568dff18696ce7c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga7ff7f938edf6fc7d7568dff18696ce7c">mfs_flash_write</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a> offset, size_t n, const uint8_t *wp)</td></tr>
<tr class="memdesc:ga7ff7f938edf6fc7d7568dff18696ce7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash write.  <a href="#ga7ff7f938edf6fc7d7568dff18696ce7c">More...</a><br /></td></tr>
<tr class="separator:ga7ff7f938edf6fc7d7568dff18696ce7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga97816ae2db1ccf97bf652877db13aff1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga97816ae2db1ccf97bf652877db13aff1">mfs_flash_copy</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a> doffset, <a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a> soffset, uint32_t n)</td></tr>
<tr class="memdesc:ga97816ae2db1ccf97bf652877db13aff1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash copy.  <a href="#ga97816ae2db1ccf97bf652877db13aff1">More...</a><br /></td></tr>
<tr class="separator:ga97816ae2db1ccf97bf652877db13aff1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac66b45ab34eea80bfa81422127c430ed"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gac66b45ab34eea80bfa81422127c430ed">mfs_bank_erase</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___h_a_l___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a> bank)</td></tr>
<tr class="memdesc:gac66b45ab34eea80bfa81422127c430ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erases and verifies all sectors belonging to a bank.  <a href="#gac66b45ab34eea80bfa81422127c430ed">More...</a><br /></td></tr>
<tr class="separator:gac66b45ab34eea80bfa81422127c430ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ef3fba2f9e3b9d03811faa1eaf4bd09"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga7ef3fba2f9e3b9d03811faa1eaf4bd09">mfs_bank_verify_erase</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___h_a_l___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a> bank)</td></tr>
<tr class="memdesc:ga7ef3fba2f9e3b9d03811faa1eaf4bd09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erases and verifies all sectors belonging to a bank.  <a href="#ga7ef3fba2f9e3b9d03811faa1eaf4bd09">More...</a><br /></td></tr>
<tr class="separator:ga7ef3fba2f9e3b9d03811faa1eaf4bd09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac1f359bdbdb34e5a45832751f91ed73e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gac1f359bdbdb34e5a45832751f91ed73e">mfs_bank_write_header</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___h_a_l___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a> bank, uint32_t cnt)</td></tr>
<tr class="memdesc:gac1f359bdbdb34e5a45832751f91ed73e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the validation header in a bank.  <a href="#gac1f359bdbdb34e5a45832751f91ed73e">More...</a><br /></td></tr>
<tr class="separator:gac1f359bdbdb34e5a45832751f91ed73e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad6f7265c6f4334b2b337962180685050"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___h_a_l___m_f_s.html#gaece589baf17093143049bb73d07e1968">mfs_bank_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gad6f7265c6f4334b2b337962180685050">mfs_bank_check_header</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp)</td></tr>
<tr class="memdesc:gad6f7265c6f4334b2b337962180685050"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks integrity of the header in the shared buffer.  <a href="#gad6f7265c6f4334b2b337962180685050">More...</a><br /></td></tr>
<tr class="separator:gad6f7265c6f4334b2b337962180685050"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga728a1aa4a18799df1a027b50b0425bb2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga728a1aa4a18799df1a027b50b0425bb2">mfs_bank_scan_records</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___h_a_l___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a> bank, bool *wflagp)</td></tr>
<tr class="memdesc:ga728a1aa4a18799df1a027b50b0425bb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scans blocks searching for records.  <a href="#ga728a1aa4a18799df1a027b50b0425bb2">More...</a><br /></td></tr>
<tr class="separator:ga728a1aa4a18799df1a027b50b0425bb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae543e9eed45f7236869a8ffc5682c991"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gae543e9eed45f7236869a8ffc5682c991">mfs_bank_get_state</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___h_a_l___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a> bank, <a class="el" href="group___h_a_l___m_f_s.html#gaece589baf17093143049bb73d07e1968">mfs_bank_state_t</a> *statep, uint32_t *cntp)</td></tr>
<tr class="memdesc:gae543e9eed45f7236869a8ffc5682c991"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the state of a bank.  <a href="#gae543e9eed45f7236869a8ffc5682c991">More...</a><br /></td></tr>
<tr class="separator:gae543e9eed45f7236869a8ffc5682c991"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3880c92a1858f47e85bc21d586db2768"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga3880c92a1858f47e85bc21d586db2768">mfs_garbage_collect</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp)</td></tr>
<tr class="memdesc:ga3880c92a1858f47e85bc21d586db2768"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enforces a garbage collection.  <a href="#ga3880c92a1858f47e85bc21d586db2768">More...</a><br /></td></tr>
<tr class="separator:ga3880c92a1858f47e85bc21d586db2768"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5625fd5863620167862fc77ac1aedcf6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga5625fd5863620167862fc77ac1aedcf6">mfs_try_mount</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp)</td></tr>
<tr class="memdesc:ga5625fd5863620167862fc77ac1aedcf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a flash partition mount attempt.  <a href="#ga5625fd5863620167862fc77ac1aedcf6">More...</a><br /></td></tr>
<tr class="separator:ga5625fd5863620167862fc77ac1aedcf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga973dac70b5f8ea14000fd262fef8a1fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga973dac70b5f8ea14000fd262fef8a1fd">mfs_mount</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp)</td></tr>
<tr class="memdesc:ga973dac70b5f8ea14000fd262fef8a1fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures and activates a MFS driver.  <a href="#ga973dac70b5f8ea14000fd262fef8a1fd">More...</a><br /></td></tr>
<tr class="separator:ga973dac70b5f8ea14000fd262fef8a1fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab79398dd37917f5ddc8e3f80d16e88b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gab79398dd37917f5ddc8e3f80d16e88b0">mfsObjectInit</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp)</td></tr>
<tr class="memdesc:gab79398dd37917f5ddc8e3f80d16e88b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes an instance.  <a href="#gab79398dd37917f5ddc8e3f80d16e88b0">More...</a><br /></td></tr>
<tr class="separator:gab79398dd37917f5ddc8e3f80d16e88b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6869dc876ed8621a612ed5dd95afece6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga6869dc876ed8621a612ed5dd95afece6">mfsStart</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, const <a class="el" href="struct_m_f_s_config.html">MFSConfig</a> *config)</td></tr>
<tr class="memdesc:ga6869dc876ed8621a612ed5dd95afece6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures and activates a MFS driver.  <a href="#ga6869dc876ed8621a612ed5dd95afece6">More...</a><br /></td></tr>
<tr class="separator:ga6869dc876ed8621a612ed5dd95afece6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae3f8c1b72b2f060c3c6133ad93d41557"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gae3f8c1b72b2f060c3c6133ad93d41557">mfsStop</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp)</td></tr>
<tr class="memdesc:gae3f8c1b72b2f060c3c6133ad93d41557"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deactivates a MFS driver.  <a href="#gae3f8c1b72b2f060c3c6133ad93d41557">More...</a><br /></td></tr>
<tr class="separator:gae3f8c1b72b2f060c3c6133ad93d41557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae9f14dce0c75dee4e0a24ea776961a00"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gae9f14dce0c75dee4e0a24ea776961a00">mfsErase</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp)</td></tr>
<tr class="memdesc:gae9f14dce0c75dee4e0a24ea776961a00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys the state of the managed storage by erasing the flash.  <a href="#gae9f14dce0c75dee4e0a24ea776961a00">More...</a><br /></td></tr>
<tr class="separator:gae9f14dce0c75dee4e0a24ea776961a00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b6577aeec41970de3b351f27b728d0b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga2b6577aeec41970de3b351f27b728d0b">mfsReadRecord</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___h_a_l___m_f_s.html#gab1553dd70ef82b0c4a4ba607c660563a">mfs_id_t</a> id, size_t *np, uint8_t *buffer)</td></tr>
<tr class="memdesc:ga2b6577aeec41970de3b351f27b728d0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves and reads a data record.  <a href="#ga2b6577aeec41970de3b351f27b728d0b">More...</a><br /></td></tr>
<tr class="separator:ga2b6577aeec41970de3b351f27b728d0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa8d796e4f2fda16203809b7eb2015467"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gaa8d796e4f2fda16203809b7eb2015467">mfsWriteRecord</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___h_a_l___m_f_s.html#gab1553dd70ef82b0c4a4ba607c660563a">mfs_id_t</a> id, size_t n, const uint8_t *buffer)</td></tr>
<tr class="memdesc:gaa8d796e4f2fda16203809b7eb2015467"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates or updates a data record.  <a href="#gaa8d796e4f2fda16203809b7eb2015467">More...</a><br /></td></tr>
<tr class="separator:gaa8d796e4f2fda16203809b7eb2015467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga05869bf0e68cd47e43c98663f1b6fbfc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga05869bf0e68cd47e43c98663f1b6fbfc">mfsEraseRecord</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___h_a_l___m_f_s.html#gab1553dd70ef82b0c4a4ba607c660563a">mfs_id_t</a> id)</td></tr>
<tr class="memdesc:ga05869bf0e68cd47e43c98663f1b6fbfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erases a data record.  <a href="#ga05869bf0e68cd47e43c98663f1b6fbfc">More...</a><br /></td></tr>
<tr class="separator:ga05869bf0e68cd47e43c98663f1b6fbfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga88081d60d4dfc85bacb918e74809da1e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga88081d60d4dfc85bacb918e74809da1e">mfsPerformGarbageCollection</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp)</td></tr>
<tr class="memdesc:ga88081d60d4dfc85bacb918e74809da1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enforces a garbage collection operation.  <a href="#ga88081d60d4dfc85bacb918e74809da1e">More...</a><br /></td></tr>
<tr class="separator:ga88081d60d4dfc85bacb918e74809da1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaadbb3abec8f90a2c627419459876a4d9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gaadbb3abec8f90a2c627419459876a4d9">mfsStartTransaction</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, size_t size)</td></tr>
<tr class="memdesc:gaadbb3abec8f90a2c627419459876a4d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Puts the driver in transaction mode.  <a href="#gaadbb3abec8f90a2c627419459876a4d9">More...</a><br /></td></tr>
<tr class="separator:gaadbb3abec8f90a2c627419459876a4d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad047a752e2d4a44ea406a9454389efc7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gad047a752e2d4a44ea406a9454389efc7">mfsCommitTransaction</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp)</td></tr>
<tr class="memdesc:gad047a752e2d4a44ea406a9454389efc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">A transaction is committed and finalized atomically.  <a href="#gad047a752e2d4a44ea406a9454389efc7">More...</a><br /></td></tr>
<tr class="separator:gad047a752e2d4a44ea406a9454389efc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabc68aea584cb27f378bfa11b86a3ea8c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gabc68aea584cb27f378bfa11b86a3ea8c">mfsRollbackTransaction</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp)</td></tr>
<tr class="memdesc:gabc68aea584cb27f378bfa11b86a3ea8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">A transaction is rolled back atomically.  <a href="#gabc68aea584cb27f378bfa11b86a3ea8c">More...</a><br /></td></tr>
<tr class="separator:gabc68aea584cb27f378bfa11b86a3ea8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gacd79c4165137b0cdce501f1fb9ee9f38"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a> <tr class="memdesc:gacd79c4165137b0cdce501f1fb9ee9f38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of a flash bank.  <a href="group___h_a_l___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:gacd79c4165137b0cdce501f1fb9ee9f38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga58f14c27920b69ab065a8f73281d2732"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga58f14c27920b69ab065a8f73281d2732">mfs_state_t</a> <tr class="memdesc:ga58f14c27920b69ab065a8f73281d2732"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of driver state machine states.  <a href="group___h_a_l___m_f_s.html#ga58f14c27920b69ab065a8f73281d2732">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:ga58f14c27920b69ab065a8f73281d2732"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4907f190de6357e5dd4d92227c490cac"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> <tr class="memdesc:ga4907f190de6357e5dd4d92227c490cac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of an MFS error code.  <a href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:ga4907f190de6357e5dd4d92227c490cac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaece589baf17093143049bb73d07e1968"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___h_a_l___m_f_s.html#gaece589baf17093143049bb73d07e1968">mfs_bank_state_t</a> <tr class="memdesc:gaece589baf17093143049bb73d07e1968"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of a bank state assessment.  <a href="group___h_a_l___m_f_s.html#gaece589baf17093143049bb73d07e1968">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:gaece589baf17093143049bb73d07e1968"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gaf2d011ef87af5edc506246352c08a312"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf2d011ef87af5edc506246352c08a312">&#9670;&nbsp;</a></span>ALIGNED_REC_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ALIGNED_REC_SIZE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n</td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a>)MFS_ALIGN_NEXT(sizeof (<a class="el" href="unionmfs__data__header__t.html">mfs_data_header_t</a>) + (size_t)(n))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Data record size aligned. </p>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00050">50</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="group___h_a_l___m_f_s.html#gaa8d796e4f2fda16203809b7eb2015467">mfsWriteRecord()</a>.</p>

</div>
</div>
<a id="gacead5218e33587ddf7063f34cf5cd61d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacead5218e33587ddf7063f34cf5cd61d">&#9670;&nbsp;</a></span>ALIGNED_DHDR_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ALIGNED_DHDR_SIZE&#160;&#160;&#160;<a class="el" href="group___h_a_l___m_f_s.html#gaf2d011ef87af5edc506246352c08a312">ALIGNED_REC_SIZE</a>(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Data record header size aligned. </p>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00056">56</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="group___h_a_l___m_f_s.html#ga05869bf0e68cd47e43c98663f1b6fbfc">mfsEraseRecord()</a>, and <a class="el" href="group___h_a_l___m_f_s.html#gaadbb3abec8f90a2c627419459876a4d9">mfsStartTransaction()</a>.</p>

</div>
</div>
<a id="ga7726369e293612a01ed8fd3042e0a227"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7726369e293612a01ed8fd3042e0a227">&#9670;&nbsp;</a></span>ALIGNED_SIZEOF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ALIGNED_SIZEOF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">t</td><td>)</td>
          <td>&#160;&#160;&#160;(((sizeof (t) - 1U) | MFS_ALIGN_MASK) + 1U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Aligned size of a type. </p>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00062">62</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

</div>
</div>
<a id="gaea7b80660167c3b72a48d752ed34faae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaea7b80660167c3b72a48d752ed34faae">&#9670;&nbsp;</a></span>PAIR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAIR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">b&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(((unsigned)(a) &lt;&lt; 2U) | (unsigned)(b))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Combines two values (0..3) in one (0..15). </p>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00068">68</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

</div>
</div>
<a id="ga0277a2d4d7591173f0275af429e33a13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0277a2d4d7591173f0275af429e33a13">&#9670;&nbsp;</a></span>RET_ON_ERROR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RET_ON_ERROR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">err</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                                              \</div><div class="line">  mfs_error_t e = (err);                                                    \</div><div class="line">  if (e != MFS_NO_ERROR) {                                                  \</div><div class="line">    return e;                                                               \</div><div class="line">  }                                                                         \</div><div class="line">} <span class="keywordflow">while</span> (<span class="keyword">false</span>)</div></div><!-- fragment -->
<p>Error check helper. </p>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00073">73</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="group___h_a_l___m_f_s.html#gae543e9eed45f7236869a8ffc5682c991">mfs_bank_get_state()</a>, and <a class="el" href="group___h_a_l___m_f_s.html#ga97816ae2db1ccf97bf652877db13aff1">mfs_flash_copy()</a>.</p>

</div>
</div>
<a id="ga0dd05a7bc7d3f69ee9e95c0fe3f26b38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0dd05a7bc7d3f69ee9e95c0fe3f26b38">&#9670;&nbsp;</a></span>MFS_CFG_MAX_RECORDS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MFS_CFG_MAX_RECORDS&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of indexed records in the managed storage. </p>
<dl class="section note"><dt>Note</dt><dd>Record indexes go from 1 to <code>MFS_CFG_MAX_RECORDS</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8h_source.html#l00055">55</a> of file <a class="el" href="hal__mfs_8h_source.html">hal_mfs.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="group___h_a_l___m_f_s.html#ga05869bf0e68cd47e43c98663f1b6fbfc">mfsEraseRecord()</a>, <a class="el" href="group___h_a_l___m_f_s.html#ga2b6577aeec41970de3b351f27b728d0b">mfsReadRecord()</a>, and <a class="el" href="group___h_a_l___m_f_s.html#gaa8d796e4f2fda16203809b7eb2015467">mfsWriteRecord()</a>.</p>

</div>
</div>
<a id="ga7370ae665f30570c642799ce51f7730d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7370ae665f30570c642799ce51f7730d">&#9670;&nbsp;</a></span>MFS_CFG_MAX_REPAIR_ATTEMPTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MFS_CFG_MAX_REPAIR_ATTEMPTS&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of repair attempts on partition mount. </p>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8h_source.html#l00062">62</a> of file <a class="el" href="hal__mfs_8h_source.html">hal_mfs.h</a>.</p>

</div>
</div>
<a id="ga9387a02dbeca5b8288fd72afaa285ebe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9387a02dbeca5b8288fd72afaa285ebe">&#9670;&nbsp;</a></span>MFS_CFG_WRITE_VERIFY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MFS_CFG_WRITE_VERIFY&#160;&#160;&#160;TRUE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verify written data. </p>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8h_source.html#l00069">69</a> of file <a class="el" href="hal__mfs_8h_source.html">hal_mfs.h</a>.</p>

</div>
</div>
<a id="ga5b6511e1ff36948a405373a579ea95fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5b6511e1ff36948a405373a579ea95fe">&#9670;&nbsp;</a></span>MFS_CFG_STRONG_CHECKING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MFS_CFG_STRONG_CHECKING&#160;&#160;&#160;TRUE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables a stronger and slower check procedure on mount. </p>
<p>Strong checking requires reading of the whole written data and this can be slow, normal checking only checks integrity of metadata, data errors would be detected on read. </p>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8h_source.html#l00079">79</a> of file <a class="el" href="hal__mfs_8h_source.html">hal_mfs.h</a>.</p>

</div>
</div>
<a id="ga1b852c8a1778e81373b7e8a4626c5472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1b852c8a1778e81373b7e8a4626c5472">&#9670;&nbsp;</a></span>MFS_CFG_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MFS_CFG_BUFFER_SIZE&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Size of the buffer used for data copying. </p>
<dl class="section note"><dt>Note</dt><dd>The buffer size must be a power of two and not smaller than 16 bytes. </dd>
<dd>
Larger buffers improve performance, buffers with size multiple of the flash program page size work better. </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8h_source.html#l00090">90</a> of file <a class="el" href="hal__mfs_8h_source.html">hal_mfs.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="group___h_a_l___m_f_s.html#ga97816ae2db1ccf97bf652877db13aff1">mfs_flash_copy()</a>.</p>

</div>
</div>
<a id="gab6e932beb3b9c5eaa4fb8fee27471c18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab6e932beb3b9c5eaa4fb8fee27471c18">&#9670;&nbsp;</a></span>MFS_CFG_MEMORY_ALIGNMENT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MFS_CFG_MEMORY_ALIGNMENT&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enforced memory alignment. </p>
<p>This value must be a power of two, it enforces a memory alignment for records in the flash array. This is required when alignment constraints exist, for example when using a DTR mode on OSPI devices. </p>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8h_source.html#l00101">101</a> of file <a class="el" href="hal__mfs_8h_source.html">hal_mfs.h</a>.</p>

</div>
</div>
<a id="ga70babcd0ee6e94494f9a4d3fd6a4f9b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga70babcd0ee6e94494f9a4d3fd6a4f9b2">&#9670;&nbsp;</a></span>MFS_CFG_TRANSACTION_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MFS_CFG_TRANSACTION_MAX&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of objects writable in a single transaction. </p>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8h_source.html#l00108">108</a> of file <a class="el" href="hal__mfs_8h_source.html">hal_mfs.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gab1553dd70ef82b0c4a4ba607c660563a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab1553dd70ef82b0c4a4ba607c660563a">&#9670;&nbsp;</a></span>mfs_id_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint32_t <a class="el" href="group___h_a_l___m_f_s.html#gab1553dd70ef82b0c4a4ba607c660563a">mfs_id_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of a record identifier. </p>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8h_source.html#l00202">202</a> of file <a class="el" href="hal__mfs_8h_source.html">hal_mfs.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gacd79c4165137b0cdce501f1fb9ee9f38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacd79c4165137b0cdce501f1fb9ee9f38">&#9670;&nbsp;</a></span>mfs_bank_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___h_a_l___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of a flash bank. </p>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8h_source.html#l00154">154</a> of file <a class="el" href="hal__mfs_8h_source.html">hal_mfs.h</a>.</p>

</div>
</div>
<a id="ga58f14c27920b69ab065a8f73281d2732"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga58f14c27920b69ab065a8f73281d2732">&#9670;&nbsp;</a></span>mfs_state_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___h_a_l___m_f_s.html#ga58f14c27920b69ab065a8f73281d2732">mfs_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of driver state machine states. </p>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8h_source.html#l00162">162</a> of file <a class="el" href="hal__mfs_8h_source.html">hal_mfs.h</a>.</p>

</div>
</div>
<a id="ga4907f190de6357e5dd4d92227c490cac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4907f190de6357e5dd4d92227c490cac">&#9670;&nbsp;</a></span>mfs_error_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of an MFS error code. </p>
<dl class="section note"><dt>Note</dt><dd>Errors are negative integers, informative warnings are positive integers. </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8h_source.html#l00175">175</a> of file <a class="el" href="hal__mfs_8h_source.html">hal_mfs.h</a>.</p>

</div>
</div>
<a id="gaece589baf17093143049bb73d07e1968"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaece589baf17093143049bb73d07e1968">&#9670;&nbsp;</a></span>mfs_bank_state_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___h_a_l___m_f_s.html#gaece589baf17093143049bb73d07e1968">mfs_bank_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of a bank state assessment. </p>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8h_source.html#l00193">193</a> of file <a class="el" href="hal__mfs_8h_source.html">hal_mfs.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gabfee0e57611e55ed09ad89610b9ffdfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabfee0e57611e55ed09ad89610b9ffdfd">&#9670;&nbsp;</a></span>mfs_flash_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_flash_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>rp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flash read. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>flash offset </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>number of bytes to be read </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rp</td><td>pointer to the data buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:^^Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00172">172</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">References <a class="el" href="struct_m_f_s_driver.html#a5156bf2198adb862e972b613a73fdd47">MFSDriver::config</a>, <a class="el" href="struct_m_f_s_config.html#add51de97f84764637bf739cb5ad47e19">MFSConfig::flashp</a>, and <a class="el" href="group___h_a_l___f_l_a_s_h.html#ga4cd17b0bd53628f8e625a35848c08676">flashRead</a>.</p>

<p class="reference">Referenced by <a class="el" href="group___h_a_l___m_f_s.html#gae543e9eed45f7236869a8ffc5682c991">mfs_bank_get_state()</a>, and <a class="el" href="group___h_a_l___m_f_s.html#ga97816ae2db1ccf97bf652877db13aff1">mfs_flash_copy()</a>.</p>

</div>
</div>
<a id="ga7ff7f938edf6fc7d7568dff18696ce7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7ff7f938edf6fc7d7568dff18696ce7c">&#9670;&nbsp;</a></span>mfs_flash_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_flash_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>wp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flash write. </p>
<dl class="section note"><dt>Note</dt><dd>If the option <code>MFS_CFG_WRITE_VERIFY</code> is enabled then the flash is also read back for verification.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>flash offset </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>number of bytes to be written </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wp</td><td>pointer to the data buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:^^Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00198">198</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">References <a class="el" href="struct_m_f_s_driver.html#a5156bf2198adb862e972b613a73fdd47">MFSDriver::config</a>, <a class="el" href="struct_m_f_s_config.html#add51de97f84764637bf739cb5ad47e19">MFSConfig::flashp</a>, and <a class="el" href="group___h_a_l___f_l_a_s_h.html#gac2312eaaf5758805382532f10e3d92cb">flashProgram</a>.</p>

<p class="reference">Referenced by <a class="el" href="group___h_a_l___m_f_s.html#ga97816ae2db1ccf97bf652877db13aff1">mfs_flash_copy()</a>.</p>

</div>
</div>
<a id="ga97816ae2db1ccf97bf652877db13aff1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga97816ae2db1ccf97bf652877db13aff1">&#9670;&nbsp;</a></span>mfs_flash_copy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_flash_copy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a>&#160;</td>
          <td class="paramname"><em>doffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a>&#160;</td>
          <td class="paramname"><em>soffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flash copy. </p>
<dl class="section note"><dt>Note</dt><dd>If the option <code>MFS_CFG_WRITE_VERIFY</code> is enabled then the flash is also read back for verification.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">doffset</td><td>destination flash offset </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">soffset</td><td>source flash offset </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>number of bytes to be copied </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:^^Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00243">243</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">References <a class="el" href="struct_m_f_s_driver.html#af9978bcc8f41e20c294c529be3078504">MFSDriver::buffer</a>, <a class="el" href="group___h_a_l___m_f_s.html#ga1b852c8a1778e81373b7e8a4626c5472">MFS_CFG_BUFFER_SIZE</a>, <a class="el" href="group___h_a_l___m_f_s.html#gabfee0e57611e55ed09ad89610b9ffdfd">mfs_flash_read()</a>, <a class="el" href="group___h_a_l___m_f_s.html#ga7ff7f938edf6fc7d7568dff18696ce7c">mfs_flash_write()</a>, and <a class="el" href="group___h_a_l___m_f_s.html#ga0277a2d4d7591173f0275af429e33a13">RET_ON_ERROR</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___h_a_l___m_f_s_ga97816ae2db1ccf97bf652877db13aff1_cgraph.png" border="0" usemap="#group___h_a_l___m_f_s_ga97816ae2db1ccf97bf652877db13aff1_cgraph" alt=""/></div>
<map name="group___h_a_l___m_f_s_ga97816ae2db1ccf97bf652877db13aff1_cgraph" id="group___h_a_l___m_f_s_ga97816ae2db1ccf97bf652877db13aff1_cgraph">
</map>
</div>

</div>
</div>
<a id="gac66b45ab34eea80bfa81422127c430ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac66b45ab34eea80bfa81422127c430ed">&#9670;&nbsp;</a></span>mfs_bank_erase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_bank_erase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a>&#160;</td>
          <td class="paramname"><em>bank</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Erases and verifies all sectors belonging to a bank. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bank</td><td>bank to be erased </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:^^Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00279">279</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

</div>
</div>
<a id="ga7ef3fba2f9e3b9d03811faa1eaf4bd09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7ef3fba2f9e3b9d03811faa1eaf4bd09">&#9670;&nbsp;</a></span>mfs_bank_verify_erase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_bank_verify_erase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a>&#160;</td>
          <td class="paramname"><em>bank</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Erases and verifies all sectors belonging to a bank. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bank</td><td>bank to be verified </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:^^Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00325">325</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

</div>
</div>
<a id="gac1f359bdbdb34e5a45832751f91ed73e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac1f359bdbdb34e5a45832751f91ed73e">&#9670;&nbsp;</a></span>mfs_bank_write_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_bank_write_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a>&#160;</td>
          <td class="paramname"><em>bank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>cnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes the validation header in a bank. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bank</td><td>bank to be validated </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cnt</td><td>value for the flash usage counter </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:^^Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00365">365</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

</div>
</div>
<a id="gad6f7265c6f4334b2b337962180685050"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad6f7265c6f4334b2b337962180685050">&#9670;&nbsp;</a></span>mfs_bank_check_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___h_a_l___m_f_s.html#gaece589baf17093143049bb73d07e1968">mfs_bank_state_t</a> mfs_bank_check_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks integrity of the header in the shared buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The header state.</dd></dl>
<dl class="section user"><dt>Function Class:^^Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00399">399</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">References <a class="el" href="struct_m_f_s_driver.html#af9978bcc8f41e20c294c529be3078504">MFSDriver::buffer</a>, <a class="el" href="struct_m_f_s_driver.html#a5156bf2198adb862e972b613a73fdd47">MFSDriver::config</a>, and <a class="el" href="struct_m_f_s_config.html#a028bf89c2ea56dfd85c0b4d72605e3bf">MFSConfig::erased</a>.</p>

</div>
</div>
<a id="ga728a1aa4a18799df1a027b50b0425bb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga728a1aa4a18799df1a027b50b0425bb2">&#9670;&nbsp;</a></span>mfs_bank_scan_records()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_bank_scan_records </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a>&#160;</td>
          <td class="paramname"><em>bank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>wflagp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Scans blocks searching for records. </p>
<dl class="section note"><dt>Note</dt><dd>The block integrity is strongly checked.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bank</td><td>the bank identifier </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">wflagp</td><td>warning flag on anomalies</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:^^Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00439">439</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

</div>
</div>
<a id="gae543e9eed45f7236869a8ffc5682c991"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae543e9eed45f7236869a8ffc5682c991">&#9670;&nbsp;</a></span>mfs_bank_get_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_bank_get_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a>&#160;</td>
          <td class="paramname"><em>bank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___m_f_s.html#gaece589baf17093143049bb73d07e1968">mfs_bank_state_t</a> *&#160;</td>
          <td class="paramname"><em>statep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>cntp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines the state of a bank. </p>
<dl class="section note"><dt>Note</dt><dd>This function does not test the bank integrity by scanning the data area, it just checks the header.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bank</td><td>bank to be checked </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">statep</td><td>bank state, it can be:<ul>
<li>MFS_BANK_ERASED</li>
<li>MFS_BANK_GARBAGE</li>
<li>MFS_BANK_OK</li>
</ul>
</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cntp</td><td>bank counter </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:^^Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00549">549</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___h_a_l___m_f_s.html#gabfee0e57611e55ed09ad89610b9ffdfd">mfs_flash_read()</a>, and <a class="el" href="group___h_a_l___m_f_s.html#ga0277a2d4d7591173f0275af429e33a13">RET_ON_ERROR</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___h_a_l___m_f_s_gae543e9eed45f7236869a8ffc5682c991_cgraph.png" border="0" usemap="#group___h_a_l___m_f_s_gae543e9eed45f7236869a8ffc5682c991_cgraph" alt=""/></div>
<map name="group___h_a_l___m_f_s_gae543e9eed45f7236869a8ffc5682c991_cgraph" id="group___h_a_l___m_f_s_gae543e9eed45f7236869a8ffc5682c991_cgraph">
</map>
</div>

</div>
</div>
<a id="ga3880c92a1858f47e85bc21d586db2768"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3880c92a1858f47e85bc21d586db2768">&#9670;&nbsp;</a></span>mfs_garbage_collect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_garbage_collect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enforces a garbage collection. </p>
<p>Storage data is compacted into a single bank.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:^^Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00587">587</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">References <a class="el" href="struct_m_f_s_driver.html#a478c6f7768fe80177f0a17a4d3671a4e">MFSDriver::current_bank</a>.</p>

</div>
</div>
<a id="ga5625fd5863620167862fc77ac1aedcf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5625fd5863620167862fc77ac1aedcf6">&#9670;&nbsp;</a></span>mfs_try_mount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_try_mount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs a flash partition mount attempt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:^^Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00638">638</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

</div>
</div>
<a id="ga973dac70b5f8ea14000fd262fef8a1fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga973dac70b5f8ea14000fd262fef8a1fd">&#9670;&nbsp;</a></span>mfs_mount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_mount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures and activates a MFS driver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MFS_NO_ERROR</td><td>if the operation has been successfully completed. </td></tr>
    <tr><td class="paramname">MFS_WARN_GC</td><td>if the operation triggered a garbage collection. </td></tr>
    <tr><td class="paramname">MFS_ERR_FLASH_FAILURE</td><td>if the flash memory is unusable because HW failures. Makes the driver enter the <code>MFS_ERROR</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INTERNAL</td><td>if an internal logic failure is detected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00785">785</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

</div>
</div>
<a id="gab79398dd37917f5ddc8e3f80d16e88b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab79398dd37917f5ddc8e3f80d16e88b0">&#9670;&nbsp;</a></span>mfsObjectInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mfsObjectInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes an instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Initializer, this function just initializes an object and can be invoked before the kernel is initialized.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00824">824</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
<a id="ga6869dc876ed8621a612ed5dd95afece6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6869dc876ed8621a612ed5dd95afece6">&#9670;&nbsp;</a></span>mfsStart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfsStart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_m_f_s_config.html">MFSConfig</a> *&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures and activates a MFS driver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">config</td><td>pointer to the configuration </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MFS_NO_ERROR</td><td>if the operation has been completed. </td></tr>
    <tr><td class="paramname">MFS_WARN_GC</td><td>if the operation triggered a garbage collection. </td></tr>
    <tr><td class="paramname">MFS_ERR_FLASH_FAILURE</td><td>if the flash memory is unusable because HW failures. Makes the driver enter the <code>MFS_ERROR</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INTERNAL</td><td>if an internal logic failure is detected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00849">849</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___o_s_a_l.html#gad2c73ec79f38fe705784c3b51426fef7">osalDbgAssert</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
<a id="gae3f8c1b72b2f060c3c6133ad93d41557"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae3f8c1b72b2f060c3c6133ad93d41557">&#9670;&nbsp;</a></span>mfsStop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mfsStop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deactivates a MFS driver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00868">868</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___o_s_a_l.html#gad2c73ec79f38fe705784c3b51426fef7">osalDbgAssert</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
<a id="gae9f14dce0c75dee4e0a24ea776961a00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae9f14dce0c75dee4e0a24ea776961a00">&#9670;&nbsp;</a></span>mfsErase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfsErase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys the state of the managed storage by erasing the flash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MFS_ERR_INV_STATE</td><td>if the driver is in not in <code>MFS_READY</code> state. </td></tr>
    <tr><td class="paramname">MFS_NO_ERROR</td><td>if the operation has been successfully completed. </td></tr>
    <tr><td class="paramname">MFS_ERR_FLASH_FAILURE</td><td>if the flash memory is unusable because HW failures. Makes the driver enter the <code>MFS_ERROR</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INTERNAL</td><td>if an internal logic failure is detected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00894">894</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
<a id="ga2b6577aeec41970de3b351f27b728d0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2b6577aeec41970de3b351f27b728d0b">&#9670;&nbsp;</a></span>mfsReadRecord()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfsReadRecord </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___m_f_s.html#gab1553dd70ef82b0c4a4ba607c660563a">mfs_id_t</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>np</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves and reads a data record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>record numeric identifier, the valid range is between <code>1</code> and <code>MFS_CFG_MAX_RECORDS</code> </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">np</td><td>on input is the maximum buffer size, on return it is the size of the data copied into the buffer </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer</td><td>pointer to a buffer for record data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MFS_NO_ERROR</td><td>if the operation has been successfully completed. </td></tr>
    <tr><td class="paramname">MFS_ERR_INV_STATE</td><td>if the driver is in not in <code>MFS_READY</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INV_SIZE</td><td>if the passed buffer is not large enough to contain the record data. </td></tr>
    <tr><td class="paramname">MFS_ERR_NOT_FOUND</td><td>if the specified id does not exists. </td></tr>
    <tr><td class="paramname">MFS_ERR_FLASH_FAILURE</td><td>if the flash memory is unusable because HW failures. Makes the driver enter the <code>MFS_ERROR</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INTERNAL</td><td>if an internal logic failure is detected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l00932">932</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___h_a_l___m_f_s.html#ga0dd05a7bc7d3f69ee9e95c0fe3f26b38">MFS_CFG_MAX_RECORDS</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
<a id="gaa8d796e4f2fda16203809b7eb2015467"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa8d796e4f2fda16203809b7eb2015467">&#9670;&nbsp;</a></span>mfsWriteRecord()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfsWriteRecord </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___m_f_s.html#gab1553dd70ef82b0c4a4ba607c660563a">mfs_id_t</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates or updates a data record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>record numeric identifier, the valid range is between <code>1</code> and <code>MFS_CFG_MAX_RECORDS</code> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>size of data to be written, it cannot be zero </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer</td><td>pointer to a buffer for record data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MFS_NO_ERROR</td><td>if the operation has been successfully completed. </td></tr>
    <tr><td class="paramname">MFS_WARN_GC</td><td>if the operation triggered a garbage collection. </td></tr>
    <tr><td class="paramname">MFS_ERR_INV_STATE</td><td>if the driver is in not in <code>MFS_READY</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_OUT_OF_MEM</td><td>if there is not enough flash space for the operation. </td></tr>
    <tr><td class="paramname">MFS_ERR_TRANSACTION_NUM</td><td>if the transaction operations buffer space has been exceeded. </td></tr>
    <tr><td class="paramname">MFS_ERR_TRANSACTION_SIZE</td><td>if the transaction allocated space has been exceeded. </td></tr>
    <tr><td class="paramname">MFS_ERR_FLASH_FAILURE</td><td>if the flash memory is unusable because HW failures. Makes the driver enter the <code>MFS_ERROR</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INTERNAL</td><td>if an internal logic failure is detected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l01005">1005</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___h_a_l___m_f_s.html#gaf2d011ef87af5edc506246352c08a312">ALIGNED_REC_SIZE</a>, <a class="el" href="group___h_a_l___m_f_s.html#ga0dd05a7bc7d3f69ee9e95c0fe3f26b38">MFS_CFG_MAX_RECORDS</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
<a id="ga05869bf0e68cd47e43c98663f1b6fbfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga05869bf0e68cd47e43c98663f1b6fbfc">&#9670;&nbsp;</a></span>mfsEraseRecord()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfsEraseRecord </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___m_f_s.html#gab1553dd70ef82b0c4a4ba607c660563a">mfs_id_t</a>&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Erases a data record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>record numeric identifier, the valid range is between <code>1</code> and <code>MFS_CFG_MAX_RECORDS</code> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MFS_NO_ERROR</td><td>if the operation has been successfully completed. </td></tr>
    <tr><td class="paramname">MFS_WARN_GC</td><td>if the operation triggered a garbage collection. </td></tr>
    <tr><td class="paramname">MFS_ERR_INV_STATE</td><td>if the driver is in not in <code>MFS_READY</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_OUT_OF_MEM</td><td>if there is not enough flash space for the operation. </td></tr>
    <tr><td class="paramname">MFS_ERR_TRANSACTION_NUM</td><td>if the transaction operations buffer space has been exceeded. </td></tr>
    <tr><td class="paramname">MFS_ERR_TRANSACTION_SIZE</td><td>if the transaction allocated space has been exceeded. </td></tr>
    <tr><td class="paramname">MFS_ERR_FLASH_FAILURE</td><td>if the flash memory is unusable because HW failures. Makes the driver enter the <code>MFS_ERROR</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INTERNAL</td><td>if an internal logic failure is detected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l01154">1154</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___h_a_l___m_f_s.html#gacead5218e33587ddf7063f34cf5cd61d">ALIGNED_DHDR_SIZE</a>, <a class="el" href="group___h_a_l___m_f_s.html#ga0dd05a7bc7d3f69ee9e95c0fe3f26b38">MFS_CFG_MAX_RECORDS</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
<a id="ga88081d60d4dfc85bacb918e74809da1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga88081d60d4dfc85bacb918e74809da1e">&#9670;&nbsp;</a></span>mfsPerformGarbageCollection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfsPerformGarbageCollection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enforces a garbage collection operation. </p>
<p>Garbage collection involves: integrity check, optionally repairs, obsolete data removal, data compaction and a flash bank swap.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MFS_NO_ERROR</td><td>if the operation has been successfully completed. </td></tr>
    <tr><td class="paramname">MFS_ERR_INV_STATE</td><td>if the driver is in not in <code>MFS_READY</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_FLASH_FAILURE</td><td>if the flash memory is unusable because HW failures. Makes the driver enter the <code>MFS_ERROR</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INTERNAL</td><td>if an internal logic failure is detected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l01278">1278</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
<a id="gaadbb3abec8f90a2c627419459876a4d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaadbb3abec8f90a2c627419459876a4d9">&#9670;&nbsp;</a></span>mfsStartTransaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfsStartTransaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Puts the driver in transaction mode. </p>
<dl class="section note"><dt>Note</dt><dd>The parameters <code>n</code> and <code>size</code> are used to make an estimation of the space required for the transaction to succeed. Note that the estimated size must include also the extra space required by alignment enforcement option. If the estimated size is wrong (by defect) what could happen is that there is a failure in the middle of a transaction and a roll-back would be required. </dd>
<dd>
The conditions for starting a transaction are:<ul>
<li>The driver must be started.</li>
<li>There must be enough compacted storage to accommodate the whole transaction. If the required space is available but it is not compacted then a garbage collect operation is performed.</li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>estimated total size of written records in transaction, this includes, data, headers and alignment gaps </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MFS_NO_ERROR</td><td>if the operation has been successfully completed. </td></tr>
    <tr><td class="paramname">MFS_ERR_INV_STATE</td><td>if the driver is in not in <code>MFS_READY</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_FLASH_FAILURE</td><td>if the flash memory is unusable because HW failures. Makes the driver enter the <code>MFS_ERROR</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INTERNAL</td><td>if an internal logic failure is detected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l01320">1320</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___h_a_l___m_f_s.html#gacead5218e33587ddf7063f34cf5cd61d">ALIGNED_DHDR_SIZE</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
<a id="gad047a752e2d4a44ea406a9454389efc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad047a752e2d4a44ea406a9454389efc7">&#9670;&nbsp;</a></span>mfsCommitTransaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfsCommitTransaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A transaction is committed and finalized atomically. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MFS_NO_ERROR</td><td>if the operation has been successfully completed. </td></tr>
    <tr><td class="paramname">MFS_ERR_INV_STATE</td><td>if the driver is in not in <code>MFS_TRANSACTION</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_FLASH_FAILURE</td><td>if the flash memory is unusable because HW failures. Makes the driver enter the <code>MFS_ERROR</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INTERNAL</td><td>if an internal logic failure is detected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l01376">1376</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
<a id="gabc68aea584cb27f378bfa11b86a3ea8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabc68aea584cb27f378bfa11b86a3ea8c">&#9670;&nbsp;</a></span>mfsRollbackTransaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___h_a_l___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfsRollbackTransaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A transaction is rolled back atomically. </p>
<p>This function performs a garbage collection in order to discard all written data that has not been finalized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MFS_NO_ERROR</td><td>if the operation has been successfully completed. </td></tr>
    <tr><td class="paramname">MFS_ERR_INV_STATE</td><td>if the driver is in not in <code>MFS_TRANSACTION</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_FLASH_FAILURE</td><td>if the flash memory is unusable because HW failures. Makes the driver enter the <code>MFS_ERROR</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INTERNAL</td><td>if an internal logic failure is detected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:^^Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__mfs_8c_source.html#l01457">1457</a> of file <a class="el" href="hal__mfs_8c_source.html">hal_mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Mar 3 2022 18:14:25 for ChibiOS/HAL by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
